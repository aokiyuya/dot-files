" \ \/ /__  __ __  __ ____ _( )_____   | |  / /(_)____ ___   _____ _____
"  \  // / / // / / // __ `/|// ___/   | | / // // __ `__ \ / ___// ___/
"  / // /_/ // /_/ // /_/ /  (__  )    | |/ // // / / / / // /   / /__
" /_/ \__,_/ \__, / \__,_/  /____/     |___//_//_/ /_/ /_//_/    \___/
"           /____/
" my vim settings
"
" Author: Yuya Aoki
" Final update: 2017/08/24


" set options--------------- 
" {{{

"settings to use multi byte character
set encoding=utf-8
scriptencoding utf-8

" è¡Œæ•°è¡¨ç¤º
set number
" swapfileã‚’ä½œã‚‰ãªã„
set noswapfile
" ã‚³ãƒãƒ³ãƒ‰æ‰“ã¤å ´æ‰€ã®é«˜ã•
set cmdheight=2
" ãƒ•ã‚¡ã‚¤ãƒ«åè¡¨ç¤º
set title
" ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚è£œå®ŒãŒããã‚ˆã†ã«
set wildmenu
" å°æ–‡å­—ã§æ¤œç´¢ã—ãŸã¨ãå¤§æ–‡å­—å°æ–‡å­—ã‚’ç„¡è¦–ã™ã‚‹
set ignorecase
" æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå¤§æ–‡å­—ã‚’å«ã‚€æ™‚ã ã‘ğŸ›
set smartcase
" æ¤œç´¢çµæœã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ã‹ã‘ã‚‹
set hlsearch
" ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¤œç´¢
set incsearch
" ã‚«ãƒ¼ã‚½ãƒ«ã§è¡Œã‚’ã¾ãŸã’ã‚‹ã‚ˆã†ã«ã™ã‚‹
set whichwrap=b,s,h,l,<,>,[,]
" tabãªã©ã‚’å¯è¦–åŒ–ã™ã‚‹
set list
set listchars=tab:>-,extends:<,trail:-
" ãƒãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§indent, end of low, startã‚’å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«
set backspace=indent,eol,start
" ã‚¿ãƒ–å¹…4
set tabstop=4
set shiftwidth=4
" ãƒãƒ«ãƒãƒã‚¤ãƒˆç”¨()
set ambiwidth=double
" pathã«å„æ‹¡å¼µå­ç”¨ã®è¨­å®šã‚’æ›¸ã„ãŸç‰©ã‚’è¿½åŠ 
set runtimepath+=~/.vim/,~/.vim/ftplugin/
" ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®è¨­å®š
set fileencodings=utf-8,euc-jp,sjis,iso-2022-jp
" ã‚‚ã—utf-8ã§ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç®¡ç†ã—ãŸã‘ã‚Œã°
set fileencoding=utf-8
" ã“ã®å„ªå…ˆé †ä½ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹å½¢å¼ã‚’æ±ºã‚ã‚‹
set fileformats=unix,dos,mac
" 256è‰²æç”»
set t_Co=256
" Space ã‚’Leader ã«ã—ã¦ã¿ã‚‹
let g:mapleader = "\<Space>"
" ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰é€£æº
set clipboard+=unnamed
" show match
set showmatch
" input match ( Ex. (,[,", and other ) time * 0.1 sec
set matchtime=1
" length of complete list
set pumheight=10
" settings for ctags, tag jump
set tags+=./tags;
set path+=system("pyenv which python || which python")
" æš—å·ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
if !has('nvim')
  set cryptmethod=blowfish2
endif
" menuone = å€™è£œã‚’çµã‚‹
" noselect = è£œå®Œæ™‚ã«è‡ªå‹•é¸æŠã—ãªã„
" preview = è©³ç´°è¡¨ç¤º
" set completeopt=menuone,noselect,preview

" }}}



" mappings---------------
" {{{

" mapã¯ã‚­ãƒ¼è¨­å®š
" nnoremap ãŒ normal mode,
" inoremap ãŒ insert mode,
" cnoremap ãŒ command line mode
" etc. etc.
" Space w ã§ä¿å­˜ Space q ã§çµ‚äº†
nnoremap <Leader>w :w<CR>
nnoremap <Leader>q :q<CR>
nnoremap q<Space> :q<CR>
" ã†ãƒ¼ã‚“
nnoremap <Leader>z :wq<CR>
" æœ¬æ¥æŠ¼ã—ã«ãã„ã‘ã©æ…£ã‚Œã™ãã¦é »ç¹ã«æŠ¼ã›ã‚‹ã‚­ãƒ¼ã‚’ç½®æ›
nnoremap <CR> o
" nnoremap <BS> X
" for US key
" nnoremap ; :
" Space Spaceã§Visual Line
nnoremap <Leader><Leader> V
vnoremap <Leader> <ESC>
" æ‰“ã¡é–“é•ã„ is ã†ã£ã¨ãŠã—ã„
nnoremap q: :q<CR>
" +-ã§æ•°å­—å¢—ãˆãŸã‚Šæ¸›ã£ãŸã‚Šã™ã‚‹ã‚ˆ
nnoremap + <C-a>
nnoremap - <C-x>
vnoremap + <C-a>
vnoremap - <C-x>

" <>ã‚’ã†ã¤ã®ãŒé¢å€’ãªã®ã§çŸ¢å°ã§ä»£æ›¿ã™ã‚‹ã‚ˆ><
nnoremap <right> >>
nnoremap <left> <<
nnoremap > >>
nnoremap < <<
vnoremap <right> >
vnoremap <left> <

" <C-f><C-b>ãŒç›´æ„Ÿçš„ã§ãªã„ã®ã§<C-j><C-k>ã§ä»£æ›¿
nnoremap <C-j> <C-f>
nnoremap <C-k> <C-b>
vnoremap <C-j> <C-f>
vnoremap <C-k> <C-b>

" å®Ÿéš›ã®è¡Œã§ãªãè¡¨ç¤ºã•ã‚Œã¦ã‚‹è¡Œã§ç§»å‹•ã‚’è€ƒãˆã‚‹
nnoremap j gj
nnoremap gj j
nnoremap k gk
nnoremap gk h
vnoremap j gj
vnoremap gj j
vnoremap k gk
vnoremap gk h

" $,0ã¯ãƒã‚¤ãƒ³ã‚¿ã ãŒç›´æ„Ÿçš„ã§ãªã„ã®ã§å¤‰æ›´
" nnoremap <C-l> $
" nnoremap <C-h> 0
" CheckHealthã—ãŸã‚‰æ€’ã‚‰ã‚ŒãŸã®ã§ãƒŠã‚·

" å¯¾å¿œã™ã‚‹æ‹¬å¼§ã‚’è‡ªå‹•å…¥åŠ›
" inoremap { {}<LEFT>
" inoremap < <><LEFT>
" inoremap [ []<LEFT>
" inoremap ( ()<LEFT>
" inoremap {} {}
" inoremap <> <>
" inoremap [] []
" inoremap () ()

" ã¿ã‚“ãªã‚„ã£ã¦ã‚‹ã®ã§ãŸã‚ã—ã«å°å…¥ã—ã¦ã¿ã‚‹
inoremap jj <ESC>
" åŒã˜ãƒãƒªã§æ¤œç´¢ã«ç§»ã‚‹
" inoremap ff <ESC>/
" ãƒ•ã‚¡ã‚¤ãƒŠãƒ«ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã§ã‚ˆãä½¿ã†ã®ã§å»ƒæ­¢
inoremap <C-f> <ESC>/


" ã‚³ãƒ”ãƒ¼ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘ã‚‹
nnoremap <Leader>p "0p

" ç©ºè¡ŒæŒ¿å…¥
nnoremap <Leader>o o<ESC>
nnoremap <Leader>O O<ESC>

" I don't use EX MODE
nnoremap Q <Nop>

" æ€–ã„ã®ã§èª¤ä½œå‹•ã‚’ãªãã™
nnoremap ZZ <Nop>
nnoremap ZQ <Nop>


" ç”»é¢åˆ†å‰²
nnoremap <Leader>s :vsplit<CR>
" nnoremap <Leader>- :split<CR>

" ç”»é¢ç§»å‹•
nnoremap <Leader>l <C-w>l
nnoremap <Leader>j <C-w>j
nnoremap <Leader>h <C-w>h
nnoremap <Leader>k <C-w>k

" ä½¿ã„ã«ãã„ã‚­ãƒ¼ã‚’ç½®æ›
nnoremap m %
" t ã‚’å…¨ç„¶ä½¿ã‚ãªã„ã®ã§ãƒãƒƒãƒ•ã‚¡ã®ç§»å‹•ã«å‰²ã‚Šå½“ã¦
" nnoremap t gf
nnoremap t :vsplit<CR><C-w>lgf
nnoremap T <C-^>

" ãƒãƒƒãƒ•ã‚¡ç§»å‹•
nnoremap <Leader>bp :bprevious<CR>
nnoremap <Leader>bn :bnext<CR>

" ã‚¿ãƒ–ç§»å‹•
nnoremap <Leader>tp :tabprevious<CR>
nnoremap <Leader>tn :tabnext<CR>

" ã‚¿ãƒ–æ“ä½œ
nnoremap <Leader>tl :tablast<CR>
nnoremap <Leader>tc :tabclose<CR>
nnoremap <Leader>nt :tabnew<CR>

nnoremap <Leader>tp :tabprevious<CR>

" æ‹¬å¼§ã®å¾Œã‚ã¾ã§é£›ã‚“ã§ç·¨é›†ã—ãŸã„
inoremap <C-m> <Esc>%i

" *ã‚’ã‚ˆã‚Šç°¡å˜ã«
" ã¤ã‹ã£ã¦ãªã„èª¬
nnoremap <Leader>/ *

" æ—¥ä»˜å…¥åŠ›ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
nnoremap <Leader>date a<C-r>=strftime('%Y/%m/%d')<Return><Esc>
nnoremap <Leader>time a<C-r>=strftime('%H:%M:%S')<Return><Esc>
nnoremap <Leader>now a<C-r>=strftime('%Y/%m/%d %H:%M:%S')<Return><Esc>
" Vimgrep
nnoremap <Leader>v :vim //j ./* | cw

" edit vimrc
nnoremap <Leader>. :<C-u>tabedit ~/.vim/rc/vimrc<CR>

" use NERDTree
nnoremap <Leader>e :NERDTree<CR>

nnoremap <Leader>c :make<CR>
nnoremap <Leader>m :make<CR>

nnoremap <Leader>f :%foldclose<CR>

" put esc-key for delete highlight
nnoremap <silent> <Esc><Esc> :nohlsearch<CR>

" ãªã‚“ã‹ insert mode ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã™ã‚‹ã¨ãƒãƒ¼ãƒãƒ«ã«æˆ»ã‚‹ã®ã§ãã•ã„ã‚‚ã®ã«ãµãŸ
inoremap <CR> <CR>

nnoremap <Leader>T :vsp<CR><C-w>l<C-]>

" æ¤œç´¢ã—ãŸã¨ãã«ï¼Œç”»é¢ã®çœŸã‚“ä¸­ã«ç§»å‹•
nnoremap n nzz
nnoremap N Nzz

" ä»–ã®ã‚³ãƒãƒ³ãƒ‰ã¨æŒ™å‹•ã‚’åˆã‚ã›ã‚‹
nnoremap Y y$

" }}}


" OSã®åˆ¤å®š
if has('win32')
	let g:ostype = 'Win'
elseif has('mac')
	let g:ostype = 'Mac'
	set shell=sh
else
	let g:ostype = system('uname')
	set shell=sh
endif



" reset augroup
augroup MyAutoCmd
  autocmd!
augroup END

" road template
autocmd MyAutoCmd BufNewFile *.py 0r $HOME/.vim/template/template.py
autocmd MyAutoCmd BufNewFile *.cpp 0r $HOME/.vim/template/template.cpp
autocmd MyAutoCmd BufNewFile *.c 0r $HOME/.vim/template/template.cpp
autocmd MyAutoCmd BufNewFile *.sh 0r $HOME/.vim/template/template.sh
autocmd MyAutoCmd BufNewFile *.tex 0r $HOME/.vim/template/template.tex
autocmd MyAutoCmd BufNewFile Makefile 0r $HOME/.vim/template/template.make
" autocmd MyAutoCmd BufNewFile 201[0-9]-[01][0-9]-[0-3][0-9].md 0r $HOME/tmp/template.md

augroup autoxxd
	autocmd!
	autocmd BufReadPost * if &binary | silent %!xxd -g 1
	autocmd BufReadPost * set ft=xxd | endif
	autocmd BufWritePre * if &binary | %!xxd -r | endif
	autocmd BufWritePost * if &binary | silent %!xxd -g 1
	autocmd BufWritePost * set nomod | endif
augroup END


" å¼•ç”¨ by https://rcmdnk.com/blog/2017/03/10/computer-mac-vim/
" ã“ã‚Œã§IMEç„¡åŠ¹åŒ–ã§ãã‚‹ã¯ãšã ã‚ˆ
" ---------------
" {{{
if has('mac')
  set ttimeoutlen=1
  let g:imeoff = 'osascript -e "tell application \"System Events\" to key code 102"'
  augroup MyIMEGroup
    autocmd!
    autocmd InsertLeave * :call system(g:imeoff)
  augroup END
  noremap <silent> <ESC> <ESC>:call system(g:imeoff)<CR>
endif
" }}}


" å¼•ç”¨ by https://github.com/Shougo/shougo-s-github/blob/master/vim/rc/vimrc
function! s:source_rc(path, ...) abort "{{{
  let l:use_global = get(a:000, 0, !has('vim_starting'))
  let l:abspath = resolve(expand('~/.vim/rc/' . a:path))
  if !l:use_global
    execute 'source' fnameescape(l:abspath)
    return
  endif
  " substitute all 'set' to 'setglobal'
  let content = map(readfile(abspath),
        \ 'substitute(v:val, "^\\W*\\zsset\\ze\\W", "setglobal", "")')
  " create tempfile and source the tempfile
  let tempfile = tempname()
  try
    call writefile(content, tempfile)
    execute 'source' fnameescape(tempfile)
  finally
    if filereadable(tempfile)
      call delete(tempfile)
    endif
  endtry
endfunction
"}}}
" dein.rc.vimã‚’èª­ã¿è¾¼ã‚€
call s:source_rc('dein.rc.vim')


" if vim8.0 or latest, Disable packpath
if v:version >= 800
  set packpath=
endif

" å¼•æ•°ãªã—ã§vimã‚’é–‹ãã¨NERDTreeã‚’èµ·å‹•
let g:file_name = expand('%')
if has('vim_starting') &&  g:file_name ==? ''
  autocmd MyAutoCmd VimEnter * NERDTree ./
endif

" For snippet_complete marker.
if has('conceal')
  set conceallevel=2 concealcursor=i
endif

" status bar
set laststatus=2

" é€éç”¨å‡¦ç†ã‚‰ã—ã„
highlight Normal ctermbg=none

filetype plugin indent on
syntax on


" vim:set foldmethod=marker:
